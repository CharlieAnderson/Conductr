<!doctype html>
<html>

<!-- =========================== HEAD =========================== -->
  <head>
    <title>Conductr Chat</title>
    <link rel="stylesheet" href="css/timetablejs.css">
    <link rel="stylesheet" href="css/app.css">
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font: 13px Helvetica, Arial; }
      form { background: none; padding: 3px; position: fixed; bottom: 0; width: 75%; height: 10px; bottom: 10%; left: 12.5%; border-radius:5px;}
      form input { border: 2px solid darkgrey; padding: 10px; width: 80%; margin-right: .5%; border-radius:5px; }
      form button { width: 15%; background: rgb(130, 224, 255); border: none; padding: 12px; border-radius:5px; }
      #messages { list-style-type: none; margin: 20%; padding: 0; left:50%; border: 3px solid black; border-radius: 5px;}
      #messages li { padding: 10px 10px; }
      #messages li:nth-child(odd) { background: darkgrey; }
      #messages li:nth-child(even) { background: lightgrey; }
      #together-button {background: green;}
      .togetherjs-started {background: red;}
    </style>
  </head>


<!-- =========================== BODY =========================== -->
  <body onload="REDIPS.drag.init()">
    <div id="schedule-container">
      <div class="timetable"></div>
    </div>

    <div id="redips-drag">
    

    <table>
      <tr>
        <th style="visibility:hidden"></th>
        <th>Monday</th>
        <th>Tuesday</th>
        <th>Wednesday</th>
        <th>Thursday</th>
        <th>Friday</th>
      </tr>
      <tr>
        <th>task 1</th>
        <td><div class ="redips-drag">Person 1</div></td>
        <td><div class ="redips-drag">Person 2</div></td>
        <td><div class ="redips-drag">Person 2</div></td>
        <td><div class ="redips-drag">Person 1</div></td>
        <td><div class ="redips-drag">Person 3</div></td>
      </tr>
      <tr>
        <th>task 2</th>
        <td><div class ="redips-drag">Person 3</div></td>
        <td><div class ="redips-drag">Person 1</div></td>
        <td><div class ="redips-drag">Person 3</div></td>
        <td><div class ="redips-drag">Person 1</div></td>
        <td><div class ="redips-drag">Person 3</div></td>
      </tr>
      <tr>
        <th>task 3</th>
        <td><div class ="redips-drag">Person 2</div></td>
        <td><div class ="redips-drag">Person 1</div></td>
        <td><div class ="redips-drag">Person 2</div></td>
        <td><div class ="redips-drag">Person 1</div></td>
        <td><div class ="redips-drag">Person 1</div></td>
      </tr>
      <tr>
        <th>task 4</th>
        <td><div class ="redips-drag">Person 3</div></td>
        <td><div class ="redips-drag">Person 1</div></td>
        <td><div class ="redips-drag">Person 3</div></td>
        <td><div class ="redips-drag">Person 2</div></td>
        <td><div class ="redips-drag">Person 2</div></td>
      </tr>
    </table>
    
    </div>

    <div id="messageBox">
      <ul id="messages"></ul>
    </div>
    <form action="">
      <input id="m" autocomplete="off" />
      <button>Send</button>
    </form>

    <button id="together-button" onclick="TogetherJS(this); return false;" data-end-togetherjs-html="End TogetherJS">Start TogetherJS</button>

    <script src="https://cdn.socket.io/socket.io-1.3.7.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> 
    <script src="js/lib/timetable.js/dist/scripts/timetable.min.js"></script>
    <script type="text/javascript" src="js/lib/redips-drag-min.js"></script>
    <script>
      var TogetherJSConfig_includeHashInUrl = true;
      var TogetherJSConfig_cloneClicks = true;
      //more config...
    </script>
<script src="https://togetherjs.com/togetherjs-min.js"></script>

    <script>
      var socket = io();
      $('form').submit(function(){
        socket.emit('chat message', $('#m').val());
        $('#m').val('');
        return false;
      });
      socket.on('chat message', function(msg){
        if(msg!=="") {
          $('#messages').append($('<li>').text(msg));
        }
      });
    </script>

    <script>
    
    $('.redips-drag').on("dblclick", function() {
      var $dialog = $("<div>", {class:"dialog-container"}).text("blarg?");
      var $input = $("<input>", {class:"dialog-input"}).text("type here");
      $("#schedule-container").append($dialog);
      $($dialog).append($input)
      $($dialog).css('top', $(this).offset().top);
      $($dialog).css('left', $(this).offset().left);

      $("body").on("click", function(dialog) {
        $dialog.remove();
      })

    });

    </script>
  </body>


</html>