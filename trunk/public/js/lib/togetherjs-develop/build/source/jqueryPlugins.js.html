<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>
      Mozilla Labs : TogetherJS
    </title>
    <meta name="viewport" content="width=320, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
    <meta name="description" content="Real time collaboration features for your website or app.">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../images/fav-icon.ico">

    <!-- use this block to set togetherjs config -->
    

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/parallax.js"></script>
    <script src="../js/custom.js"></script>
    <script src="../js/scrollTo.js"></script>
    <script src="../js/scrollspy.js"></script>
    <script src="../js/waypoints.min.js"></script>
    <script src="../js/how-animations.js"></script>
    <script src="../togetherjs.js"></script>

    <!-- retina library -->
    <script src="../js/retina.js"></script>

    <script src="//mozorg.cdn.mozilla.net/tabzilla/tabzilla.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-35433268-28']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.css" rel="stylesheet">
    <link href="../css/jumbotron.css" rel="stylesheet">
    <link href="../css/carousel.css" rel="stylesheet">
    <link href="../css/grid.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
    <link href="//mozorg.cdn.mozilla.net/media/css/tabzilla-min.css" rel="stylesheet" />

    
  <link rel="stylesheet" href="../css/docco.css">
  <script src="../js/source-code.js"></script>


    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js">
      </script>
    <![endif]-->
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="../assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-35433268-43', 'togetherjs.com');
    ga('send', 'pageview');
    </script>

  </head>
  <body >
    <div class="navbar main-header" id="main-navbar">

      <!-- Tabzilla -->
      <a href="https://www.mozilla.org/" id="tabzilla">mozilla</a>

      <!-- start container -->
      <div class="container navbox">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand main-logo" href=".././"></a>
          <a class="navbar-brand masthead-title" href=".././">TogetherJS</a>
        </div>

        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right main-nav">
            <li><a href=".././"  >Overview</a></li>
            <li><a class="documentationActive"href=".././docs/"  >Documentation</a></li>
            <li><a href="https://github.com/mozilla/togetherjs" target="_blank">Github</a></li>
            <li><a href="mailto:togetherjs@mozilla.com">Contact</a></li>
          </ul>
        </div><!--/.navbar-collapse -->

      </div>
    </div>


    

<div class="container">

    <section class="row" id="sourcecode">
      <div class="col-md-3" id="source-toc">
        <div class="panel" role="complementary" data-spy="affix" data-offset-top="200" id="sidenav">
          <div class="panel-heading">Source Code</div>
          <ul class="nav" id="sectionmenu">
            
              <li><a href="analytics.js.html">analytics</a></li>
            
              <li><a href="channels.js.html">channels</a></li>
            
              <li><a href="chat.js.html">chat</a></li>
            
              <li><a href="console.js.html">console</a></li>
            
              <li><a href="cursor.js.html">cursor</a></li>
            
              <li><a href="elementFinder.js.html">elementFinder</a></li>
            
              <li><a href="eventMaker.js.html">eventMaker</a></li>
            
              <li><a href="forms.js.html">forms</a></li>
            
              <li><a href="jqueryPlugins.js.html">jqueryPlugins</a></li>
            
              <li><a href="linkify.js.html">linkify</a></li>
            
              <li><a href="ot.js.html">ot</a></li>
            
              <li><a href="peers.js.html">peers</a></li>
            
              <li><a href="playback.js.html">playback</a></li>
            
              <li><a href="randomutil.js.html">randomutil</a></li>
            
              <li><a href="recorder.js.html">recorder</a></li>
            
              <li><a href="session.js.html">session</a></li>
            
              <li><a href="startup.js.html">startup</a></li>
            
              <li><a href="storage.js.html">storage</a></li>
            
              <li><a href="templates-localized.js.html">templates-localized</a></li>
            
              <li><a href="templates.js.html">templates</a></li>
            
              <li><a href="templating.js.html">templating</a></li>
            
              <li><a href="togetherjs.js.html">togetherjs</a></li>
            
              <li><a href="ui.js.html">ui</a></li>
            
              <li><a href="util.js.html">util</a></li>
            
              <li><a href="videos.js.html">videos</a></li>
            
              <li><a href="visibilityApi.js.html">visibilityApi</a></li>
            
              <li><a href="walkthrough.js.html">walkthrough</a></li>
            
              <li><a href="webrtc.js.html">webrtc</a></li>
            
              <li><a href="who.js.html">who</a></li>
            
              <li><a href="windowing.js.html">windowing</a></li>
            
              <li><a href="youtubeVideos.js.html">youtubeVideos</a></li>
            
          </ul>
        </div>
      </div>

      <div class="col-md-9" id="source-content">
        <h1>jqueryPlugins.js</h1>
        
          <h4><p>Some plugins for jQuery; doesn’t export anything, just patches <code>$</code>.</p>
</h4>
        

        <div class="small"><a href="https://github.com/mozilla/togetherjs/blob/develop/togetherjs/jqueryPlugins.js">See this file on Github</a></div>

        <ul class="sections">
          
            <li id="section-0">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-0">&#182;</a>
                </div>
                
              </div>
              
                <div class="content"><div class='highlight'><pre><span class="comment">/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/. */</span>

define([<span class="string">"jquery"</span>], <span class="function"><span class="keyword">function</span> <span class="params">($)</span> {</span></pre></div></div>
              
            </li>
          
            <li id="section-1">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-1">&#182;</a>
                </div>
                <p>This isn’t really a “module” since it just patches jQuery itself</p>

              </div>
              
              
            </li>
          
            <li id="section-2">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-2">&#182;</a>
                </div>
                <p>FIX ME Animations TO DO
walkthrough animations go here
animate participant cursor and box popping in when they enter the session
animate participant cursor and box popping out when they leave the session
animate the participant cursor -&gt; rotate down when they’re down the page</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>  $.fn.rotateCursorDown = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    $(<span class="string">'svg'</span>).animate({borderSpacing: -<span class="number">150</span>, opacity: <span class="number">1</span>}, {
      step: <span class="keyword">function</span>(now, fx) {
        <span class="keyword">if</span> (fx.prop == <span class="string">"borderSpacing"</span>) {
          $(<span class="keyword">this</span>).css(<span class="string">'-webkit-transform'</span>, <span class="string">'rotate('</span>+now+<span class="string">'deg)'</span>)
            .css(<span class="string">'-moz-transform'</span>, <span class="string">'rotate('</span>+now+<span class="string">'deg)'</span>)
            .css(<span class="string">'-ms-transform'</span>, <span class="string">'rotate('</span>+now+<span class="string">'deg)'</span>)
            .css(<span class="string">'-o-transform'</span>, <span class="string">'rotate('</span>+now+<span class="string">'deg)'</span>)
            .css(<span class="string">'transform'</span>, <span class="string">'rotate('</span>+now+<span class="string">'deg)'</span>);
        } <span class="keyword">else</span> {
          $(<span class="keyword">this</span>).css(fx.prop, now);
        }
      },
      duration: <span class="number">500</span>
    }, <span class="string">'linear'</span>).promise().then(<span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
      <span class="keyword">this</span>.css(<span class="string">'-webkit-transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">'-moz-transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">'-ms-transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">'-o-transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">'transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">"opacity"</span>, <span class="string">""</span>);
    });
  };</pre></div></div>
              
            </li>
          
            <li id="section-3">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-3">&#182;</a>
                </div>
                <p>animate the participant cursor -&gt; rotate up when they’re on the same frame as the user</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>  $.fn.rotateCursorDown = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    $(<span class="string">'.togetherjs-cursor svg'</span>).animate({borderSpacing: <span class="number">0</span>, opacity: <span class="number">1</span>}, {
      step: <span class="keyword">function</span>(now, fx) {
        <span class="keyword">if</span> (fx.prop == <span class="string">"borderSpacing"</span>) {
          $(<span class="keyword">this</span>).css(<span class="string">'-webkit-transform'</span>, <span class="string">'rotate('</span>+now+<span class="string">'deg)'</span>)
            .css(<span class="string">'-moz-transform'</span>, <span class="string">'rotate('</span>+now+<span class="string">'deg)'</span>)
            .css(<span class="string">'-ms-transform'</span>, <span class="string">'rotate('</span>+now+<span class="string">'deg)'</span>)
            .css(<span class="string">'-o-transform'</span>, <span class="string">'rotate('</span>+now+<span class="string">'deg)'</span>)
            .css(<span class="string">'transform'</span>, <span class="string">'rotate('</span>+now+<span class="string">'deg)'</span>);
        } <span class="keyword">else</span> {
          $(<span class="keyword">this</span>).css(fx.prop, now);
        }
      },
      duration: <span class="number">500</span>
    }, <span class="string">'linear'</span>).promise().then(<span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
      <span class="keyword">this</span>.css(<span class="string">'-webkit-transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">'-moz-transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">'-ms-transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">'-o-transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">'transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">"opacity"</span>, <span class="string">""</span>);
    });
  };</pre></div></div>
              
            </li>
          
            <li id="section-4">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-4">&#182;</a>
                </div>
                <p>Move notification when another notification slides in //</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>

  <span class="comment">/* Pop in window from dock button: */</span>
  $.fn.popinWindow = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span></pre></div></div>
              
            </li>
          
            <li id="section-5">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-5">&#182;</a>
                </div>
                <p>mobile popout window with no animation</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span>($.browser.mobile) {</pre></div></div>
              
            </li>
          
            <li id="section-6">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-6">&#182;</a>
                </div>
                <p>starting position</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>        <span class="keyword">this</span>.css({
          left: <span class="string">"0px"</span>,
          opacity: <span class="number">1</span>,
          <span class="string">"zIndex"</span>: <span class="number">8888</span>
        });</pre></div></div>
              
            </li>
          
            <li id="section-7">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-7">&#182;</a>
                </div>
                <p>starting position for arrow</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>        $(<span class="string">'#togetherjs-window-pointer-right'</span>).css({
          left: <span class="string">"+=74px"</span>,
          opacity: <span class="number">1</span>,
          <span class="string">"zIndex"</span>: <span class="number">8888</span>
        });</pre></div></div>
              
            </li>
          
            <li id="section-8">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-8">&#182;</a>
                </div>
                <p>animate arrow out</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>        $(<span class="string">'#togetherjs-window-pointer-right'</span>).animate({
          opacity: <span class="number">1</span>,
          left: <span class="string">"-=78px"</span>
        }, {
          duration:<span class="number">60</span>, easing:<span class="string">"linear"</span>
        });
        $(<span class="string">'#togetherjs-window-pointer-right'</span>).queue();</pre></div></div>
              
            </li>
          
            <li id="section-9">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-9">&#182;</a>
                </div>
                <p>bounce arrow back</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>        $(<span class="string">'#togetherjs-window-pointer-right'</span>).animate({
          left:<span class="string">'+=4px'</span>
        }, {
          duration:<span class="number">60</span>, easing:<span class="string">"linear"</span>
        });</pre></div></div>
              
            </li>
          
            <li id="section-10">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-10">&#182;</a>
                </div>
                <p>animate window out</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>        <span class="keyword">this</span>.animate({
          opacity: <span class="number">1</span>,
          left: <span class="string">"0px"</span>
        }, {
          duration:<span class="number">60</span>, easing:<span class="string">"linear"</span>
        });
        <span class="keyword">this</span>.queue();</pre></div></div>
              
            </li>
          
            <li id="section-11">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-11">&#182;</a>
                </div>
                <p>bounce window back</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>        <span class="keyword">this</span>.animate({
          left:<span class="string">'0px'</span>
        }, {
          duration:<span class="number">60</span>, easing:<span class="string">"linear"</span>
        });
    }

    <span class="keyword">else</span> {</pre></div></div>
              
            </li>
          
            <li id="section-12">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-12">&#182;</a>
                </div>
                <p>starting position</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>.css({
        left: <span class="string">"+=74px"</span>,
        opacity: <span class="number">1</span>,
        <span class="string">"zIndex"</span>: <span class="number">8888</span>
      });</pre></div></div>
              
            </li>
          
            <li id="section-13">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-13">&#182;</a>
                </div>
                <p>starting position for arrow</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>      $(<span class="string">'#togetherjs-window-pointer-right'</span>).css({
        left: <span class="string">"+=74px"</span>,
        opacity: <span class="number">1</span>,
        <span class="string">"zIndex"</span>: <span class="number">8888</span>
      });</pre></div></div>
              
            </li>
          
            <li id="section-14">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-14">&#182;</a>
                </div>
                <p>animate arrow out</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>      $(<span class="string">'#togetherjs-window-pointer-right'</span>).animate({
        opacity: <span class="number">1</span>,
        left: <span class="string">"-=78px"</span>
      }, {
        duration:<span class="number">60</span>, easing:<span class="string">"linear"</span>
      });
      $(<span class="string">'#togetherjs-window-pointer-right'</span>).queue();</pre></div></div>
              
            </li>
          
            <li id="section-15">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-15">&#182;</a>
                </div>
                <p>bounce arrow back</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>      $(<span class="string">'#togetherjs-window-pointer-right'</span>).animate({
        left:<span class="string">'+=4px'</span>
      }, {
        duration:<span class="number">60</span>, easing:<span class="string">"linear"</span>
      });</pre></div></div>
              
            </li>
          
            <li id="section-16">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-16">&#182;</a>
                </div>
                <p>animate window out</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>.animate({
        opacity: <span class="number">1</span>,
        left: <span class="string">"-=78px"</span>
      }, {
        duration:<span class="number">60</span>, easing:<span class="string">"linear"</span>
      });
      <span class="keyword">this</span>.queue();</pre></div></div>
              
            </li>
          
            <li id="section-17">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-17">&#182;</a>
                </div>
                <p>bounce window back</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>      <span class="keyword">this</span>.animate({
        left:<span class="string">'+=4px'</span>
      }, {
        duration:<span class="number">60</span>, easing:<span class="string">"linear"</span>
      });

    }

  };

  <span class="comment">/* Slide in notification window: */</span>
  $.fn.slideIn = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">this</span>.css({</pre></div></div>
              
            </li>
          
            <li id="section-18">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-18">&#182;</a>
                </div>
                <p>top: “240px”,</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>      left: <span class="string">"+=74px"</span>,
      opacity: <span class="number">0</span>,
      <span class="string">"zIndex"</span>: <span class="number">8888</span>
    });
    <span class="keyword">return</span> <span class="keyword">this</span>.animate({
      <span class="string">"left"</span>: <span class="string">"-=74px"</span>,
      opacity: <span class="number">1</span>,
      <span class="string">"zIndex"</span>: <span class="number">9999</span>
    }, <span class="string">"fast"</span>);
  };

  <span class="comment">/* Used to fade away notification windows + flip the bottom of them out: */</span>
  $.fn.fadeOut = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">this</span>.animate({borderSpacing: -<span class="number">90</span>, opacity: <span class="number">0.5</span>}, {
      step: <span class="keyword">function</span>(now, fx) {
        <span class="keyword">if</span> (fx.prop == <span class="string">"borderSpacing"</span>) {
          $(<span class="keyword">this</span>).css(<span class="string">'-webkit-transform'</span>, <span class="string">'perspective( 600px ) rotateX('</span>+now+<span class="string">'deg)'</span>)
            .css(<span class="string">'-moz-transform'</span>, <span class="string">'perspective( 600px ) rotateX('</span>+now+<span class="string">'deg)'</span>)
            .css(<span class="string">'-ms-transform'</span>, <span class="string">'perspective( 600px ) rotateX('</span>+now+<span class="string">'deg)'</span>)
            .css(<span class="string">'-o-transform'</span>, <span class="string">'perspective( 600px ) rotateX('</span>+now+<span class="string">'deg)'</span>)
            .css(<span class="string">'transform'</span>, <span class="string">'perspective( 600px ) rotateX('</span>+now+<span class="string">'deg)'</span>);
        } <span class="keyword">else</span> {
          $(<span class="keyword">this</span>).css(fx.prop, now);
        }
      },
      duration: <span class="number">500</span>
    }, <span class="string">'linear'</span>).promise().then(<span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
      <span class="keyword">this</span>.css(<span class="string">'-webkit-transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">'-moz-transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">'-ms-transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">'-o-transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">'transform'</span>, <span class="string">''</span>);
      <span class="keyword">this</span>.css(<span class="string">"opacity"</span>, <span class="string">""</span>);
    });
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };

  <span class="comment">/* used when user goes down to participant cursor location on screen */</span>
  $.fn.easeTo = <span class="function"><span class="keyword">function</span> <span class="params">(y)</span> {</span>
    <span class="keyword">return</span> <span class="keyword">this</span>.animate({
      scrollTop: y
    }, {
      duration: <span class="number">400</span>,
      easing: <span class="string">"swing"</span>
    });
  };</pre></div></div>
              
            </li>
          
            <li id="section-19">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-19">&#182;</a>
                </div>
                <p>avatar animate in</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>  $.fn.animateDockEntry = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">var</span> height = <span class="keyword">this</span>.height();
    <span class="keyword">var</span> width = <span class="keyword">this</span>.width();
    <span class="keyword">var</span> backgroundSize = height + <span class="number">4</span>;
    <span class="keyword">var</span> margin = parseInt(<span class="keyword">this</span>.css(<span class="string">"marginLeft"</span>), <span class="number">10</span>);</pre></div></div>
              
            </li>
          
            <li id="section-20">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-20">&#182;</a>
                </div>
                <p>set starting position CSS for avatar</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>.css({
      marginLeft: margin + width/<span class="number">2</span>,
      height: <span class="number">0</span>,
      width: <span class="number">0</span>,
      backgroundSize: <span class="string">"0 0"</span>
    });

    <span class="keyword">var</span> self = <span class="keyword">this</span>;</pre></div></div>
              
            </li>
          
            <li id="section-21">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-21">&#182;</a>
                </div>
                <p>then animate avatar to the actual dimensions, and reset the values</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>.animate({
      marginLeft: margin,
      height: height,
      width: width,
      backgroundSize: backgroundSize
    }, {
      duration: <span class="number">600</span>
    }).promise().then(<span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
      self.css({
        marginLeft: <span class="string">""</span>,
        height: <span class="string">""</span>,
        width: <span class="string">""</span>,
        backgroundSize: <span class="string">""</span>
      });
    });
    <span class="keyword">return</span> <span class="keyword">this</span>;
  };</pre></div></div>
              
            </li>
          
            <li id="section-22">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-22">&#182;</a>
                </div>
                <p>avatar animate out, reverse of above</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>  $.fn.animateDockExit = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span></pre></div></div>
              
            </li>
          
            <li id="section-23">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-23">&#182;</a>
                </div>
                <p>get the current avatar dimenensions</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>    <span class="keyword">var</span> height = <span class="keyword">this</span>.height();
    <span class="keyword">var</span> width = <span class="keyword">this</span>.width();
    <span class="keyword">var</span> backgroundSize = height + <span class="number">4</span>;
    <span class="keyword">var</span> margin = parseInt(<span class="keyword">this</span>.css(<span class="string">"marginLeft"</span>), <span class="number">10</span>);</pre></div></div>
              
            </li>
          
            <li id="section-24">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-24">&#182;</a>
                </div>
                <p>then animate avatar to shrink to nothing, and reset the values again
FIXME this needs to animate from the CENTER</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>    <span class="keyword">this</span>.animate({
      marginLeft: margin + width/<span class="number">2</span>,
      height: <span class="number">0</span>,
      width: <span class="number">0</span>,
      backgroundSize: <span class="string">"0 0"</span>,
      opacity: <span class="number">0</span>
    }, <span class="number">600</span> );

    <span class="keyword">return</span> <span class="keyword">this</span>;

  };

  $.fn.animateCursorEntry = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span></pre></div></div>
              
            </li>
          
            <li id="section-25">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-25">&#182;</a>
                </div>
                <p>Make the cursor bubble pop in</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>  };</pre></div></div>
              
            </li>
          
            <li id="section-26">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-26">&#182;</a>
                </div>
                <p>keyboard typing animation</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>  $.fn.animateKeyboard = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">var</span> one = <span class="keyword">this</span>.find(<span class="string">".togetherjs-typing-ellipse-one"</span>);
    <span class="keyword">var</span> two = <span class="keyword">this</span>.find(<span class="string">".togetherjs-typing-ellipse-two"</span>);
    <span class="keyword">var</span> three = <span class="keyword">this</span>.find(<span class="string">".togetherjs-typing-ellipse-three"</span>);
    <span class="keyword">var</span> count = -<span class="number">1</span>;
    <span class="keyword">var</span> run = (<span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
      count = (count+<span class="number">1</span>) % <span class="number">4</span>;
      <span class="keyword">if</span> (count === <span class="number">0</span>) {
        one.css(<span class="string">"opacity"</span>, <span class="number">0.5</span>);
        two.css(<span class="string">"opacity"</span>, <span class="number">0.5</span>);
        three.css(<span class="string">"opacity"</span>, <span class="number">0.5</span>);
      } <span class="keyword">else</span> <span class="keyword">if</span> (count == <span class="number">1</span>) {
        one.css(<span class="string">"opacity"</span>, <span class="number">1</span>);
      } <span class="keyword">else</span> <span class="keyword">if</span> (count == <span class="number">2</span>) {
        two.css(<span class="string">"opacity"</span>, <span class="number">1</span>);
      } <span class="keyword">else</span> { <span class="comment">// count==3</span>
        three.css(<span class="string">"opacity"</span>, <span class="number">1</span>);
      }
    }).bind(<span class="keyword">this</span>);
    run();
    <span class="keyword">var</span> interval = setInterval(run, <span class="number">300</span>);
    <span class="keyword">this</span>.data(<span class="string">"animateKeyboard"</span>, interval);
  };

  $.fn.stopKeyboardAnimation = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    clearTimeout(<span class="keyword">this</span>.data(<span class="string">"animateKeyboard"</span>));
    <span class="keyword">this</span>.data(<span class="string">"animateKeyboard"</span>, <span class="literal">null</span>);
  };</pre></div></div>
              
            </li>
          
            <li id="section-27">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-27">&#182;</a>
                </div>
                <p>FIXME: not sure if this is legit, but at least the modern mobile devices we
care about should have this defined:</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>  <span class="keyword">if</span> (! $.browser) {
    $.browser = {};
  }
  $.browser.mobile = window.orientation !== <span class="literal">undefined</span>;
  <span class="keyword">if</span> (navigator.userAgent.search(<span class="regexp">/mobile/i</span>) != -<span class="number">1</span>) {</pre></div></div>
              
            </li>
          
            <li id="section-28">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-28">&#182;</a>
                </div>
                <p>FIXME: At least on the Firefox OS simulator I need this</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>    $.browser.mobile = <span class="literal">true</span>;
  }

  <span class="keyword">if</span> ($.browser.mobile &amp;&amp; window.matchMedia &amp;&amp; ! window.matchMedia(<span class="string">"screen and (max-screen-width: 480px)"</span>).matches) {</pre></div></div>
              
            </li>
          
            <li id="section-29">
              <div class="annotation">
                <div class="pilwrap">
                  <a class="pilcrow" href="#section-29">&#182;</a>
                </div>
                <p>FIXME: for Firefox OS simulator really:</p>

              </div>
              
                <div class="content"><div class='highlight'><pre>    document.body.className += <span class="string">" togetherjs-mobile-browser"</span>;
  }

});</pre></div></div>
              
            </li>
          
        </ul>
      </div>
    </section>






        <hr>

        <footer>

          <section class="row" id="footer">
            <div class="col-xs-12 col-sm-3 text-left">
              <p><a href="https://mozillalabs.com/en-US/" target="_blank"><img src="../images/footer-mozilla-labs.png"></a></p>
            </div>
            <div class="col-xs-12 col-sm-3">
              <ul class="list-unstyled text-left">
                <li class=""><a href=".././" class="">Overview</a></li>
                <li><a href=".././docs/" target="_blank">Docs</a></li>
                <li class=""><a href="https://github.com/mozilla/togetherjs" target="_blank">GitHub</a></li>
                <li class=""><a href="mailto:togetherjs@mozilla.com" target="_blank">Contact</a></li>
              </ul>
            </div>
            <div class="col-xs-12 col-sm-3">
              <ul class="list-unstyled text-left">
                <li class=""><a href="https://mozillalabs.com/en-US/togetherjs/" target="_blank">About</a></li>
                <li><a href=".././docs/contributing.html">Contributing</a></li>
                <li><a href="../source/">Source Code</a></li>
                <li><a href="../faq.html">FAQ</a></li>
                <li class=""><a href="https://twitter.com/togetherjs" target="_blank">Twitter</a></li>
              </ul>
            </div>
            <div class="col-xs-12 col-sm-3">
              <ul class="list-unstyled text-left">
                <li class=""><a href="https://www.mozilla.org/privacy/websites/" target="_blank">Privacy Policy</a></li>
                <li class=""><a href="https://www.mozilla.org/about/legal/" target="_blank">Legal Notices</a></li>
                <li class=""><a href="https://www.mozilla.org/legal/fraud-report/" target="_blank">Report Trademark Abuses</a></li>
                <li class="ph-credit">Thanks to Yuan Wang for the cover photo!</li>
              </ul>
            </div>
          </section>
        </footer>
      </section>

    </div> <!-- /container -->

  </body>
</html>
